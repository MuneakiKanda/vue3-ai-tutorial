## 第1章: Vue3とは？

> **読了時間目安**: 20分
> **難易度**: ★☆☆☆☆

---

### この章で学ぶこと

この章を終えると、以下のことができるようになります。

- 従来のWeb開発と **SPA（Single Page Application）** の違いを説明できる
- Vue3 がどのような課題を解決するフレームワークなのか理解できる
- Vue3 の3つの特徴（学びやすさ・高性能・柔軟性）を説明できる
- Vue3 エコシステム（Vue Router, Pinia, Vite）の役割を大まかに把握できる

---

### 前提

この章を読む前に、以下が完了している必要があります。

- HTML / CSS / JavaScript の基礎知識があること

---

### Webアプリケーション開発の変遷

#### なぜフロントエンドフレームワークが必要なのか

Webサイトを作るだけなら、HTML・CSS・JavaScript だけで十分です。では、なぜ Vue3 のような **フレームワーク（Framework）** が必要なのでしょうか。

その答えは、**Webに求められる役割が大きく変わった** からです。

かつてのWebサイトは「情報を表示するだけ」のものでした。しかし、現在のWebアプリケーションは Gmail、Google マップ、Slack のように、**デスクトップアプリと同じレベルの操作性** を求められています。

このような複雑なUIを素の HTML と JavaScript だけで作ろうとすると、コードはすぐに管理できないほど複雑になります。フロントエンドフレームワークは、この複雑さを整理するための道具です。

#### Web開発の歴史を3つの時代で理解する

Web開発の進化を「料理」に例えてみましょう。

```
┌─────────────────────────────────────────────────────────┐
│  第1世代: 静的HTML時代（〜2005年頃）                      │
│  → レシピ通りに作るだけ。毎回キッチンを片付けて最初から。  │
│    リンクをクリックするたびにページ全体を再読み込み。       │
│                                                         │
│  第2世代: jQuery時代（2006年〜2013年頃）                  │
│  → 便利な調理器具が登場。でも大量の料理を作ると散らかる。  │
│    DOM操作が楽になったが、大規模アプリでは管理が困難に。    │
│                                                         │
│  第3世代: SPAフレームワーク時代（2014年〜現在）            │
│  → システムキッチン導入。整理整頓のルールが組み込まれた。  │
│    Vue, React, Angular などが登場。                       │
└─────────────────────────────────────────────────────────┘
```

**第1世代** では、ユーザーがリンクをクリックするたびに、ブラウザはサーバーに新しいページを要求していました。ページ全体が白くなり、再読み込みされるあの動きです。

**第2世代** では、jQuery というライブラリが登場しました。JavaScript で HTML を動的に書き換えること（**DOM操作**）が格段に楽になりました。しかし、アプリが大きくなると「どのコードがどの画面部分を操作しているのか」が分からなくなる問題が起きました。

**第3世代** が、Vue3 を含む **SPA フレームワーク** の時代です。

---

### SPA（Single Page Application）とは何か

**SPA（Single Page Application / シングルページアプリケーション）** とは、1つのHTMLページだけを読み込み、その後はページ遷移せずに **JavaScript が画面の内容を書き換えていく** 方式のWebアプリケーションです。

#### 従来のWebサイト（MPA）との違い

従来のWebサイトは **MPA（Multi Page Application / マルチページアプリケーション）** と呼ばれます。2つの方式を比較してみましょう。

```
【MPA: 従来のWebサイト】

  ブラウザ                    サーバー
    │                          │
    │── ページAを要求 ────────→│
    │←─ ページA全体を返す ─────│  ← ページ全体を読み込み
    │                          │
    │── ページBを要求 ────────→│
    │←─ ページB全体を返す ─────│  ← また全体を読み込み（白い画面が一瞬出る）
    │                          │


【SPA: シングルページアプリケーション】

  ブラウザ                    サーバー
    │                          │
    │── 最初のページを要求 ───→│
    │←─ HTML + JS を返す ─────│  ← 最初だけ全体を読み込み
    │                          │
    │── 必要なデータだけ要求 ─→│
    │←─ JSON データを返す ────│  ← 画面はJSが書き換え（スムーズ）
    │                          │
```

#### SPA のメリット

- **スムーズな操作感**: ページ遷移で画面が白くならない。ネイティブアプリのような体験
- **高速な画面切り替え**: 必要なデータだけを取得するため、通信量が少ない
- **リッチなUI**: ドラッグ＆ドロップ、リアルタイム更新などが実装しやすい

#### SPA のデメリット

- **初回読み込みがやや遅い**: JavaScript のコード全体を最初にダウンロードする必要がある
- **SEO対策に工夫が必要**: 検索エンジンが JavaScript を実行しないとコンテンツが見えない場合がある
- **学習コストがある**: フレームワークの概念を学ぶ必要がある

> SPAのデメリットは、現在ではさまざまな技術（コード分割、SSR等）で対処可能です。このチュートリアルを進める中で、それらの手法も自然に学んでいきます。

---

### Vue3 の3つの特徴

数あるSPAフレームワークの中で、なぜ Vue3 なのでしょうか。Vue3 には大きく3つの特徴があります。

#### 特徴1: 学びやすさ（Approachable）

Vue3 は **HTML・CSS・JavaScript の知識をそのまま活かせる** ように設計されています。

たとえば、従来の JavaScript でリストを表示するコードと、Vue3 で書いた場合を比べてみましょう。

**従来の JavaScript で書いた場合:**

```html
<ul id="fruit-list"></ul>

<script>
  const fruits = ['りんご', 'バナナ', 'みかん']
  const list = document.getElementById('fruit-list')

  fruits.forEach(function(fruit) {
    const li = document.createElement('li')
    li.textContent = fruit
    list.appendChild(li)
  })
</script>
```

このコードでは、以下の手順を **自分で1つずつ指示** しています。

1. `ul` 要素を取得する
2. 配列をループする
3. `li` 要素を作る
4. テキストを設定する
5. `ul` に追加する

**Vue3 で書いた場合（イメージ）:**

```html
<ul>
  <li v-for="fruit in fruits" :key="fruit">{{ fruit }}</li>
</ul>
```

Vue3 では「`fruits` という配列の中身を `li` として表示してね」と **宣言するだけ** です。「どうやって DOM を操作するか」はVue3 が自動的に処理します。

このように、**やりたいこと（What）を書くだけで、やり方（How）はフレームワークが面倒を見てくれる** のが Vue3 の大きな利点です。この考え方を **宣言的レンダリング（Declarative Rendering）** と呼びます。

#### 特徴2: 高性能（Performant）

Vue3 は **リアクティビティ（Reactivity）** と **仮想DOM（Virtual DOM）** という2つの仕組みで高いパフォーマンスを実現しています。

**リアクティビティ** とは、データの変更が自動的にUIに反映される仕組みのことです。

たとえば、買い物リストのアプリで商品を追加したとき、従来の JavaScript だと「リストの HTML を自分で書き換える」コードを書く必要がありました。Vue3 では、データ（配列）に商品を追加するだけで、画面のリストが自動的に更新されます。

**仮想DOM** とは、実際の画面（DOM）の軽量なコピーをメモリ上に持つ仕組みです。データが変わったとき、まず仮想DOMで差分を計算し、**変更があった部分だけ** を実際の画面に反映します。これにより、無駄な画面更新を避けて高速に動作します。

```
データ変更 → 仮想DOMで差分計算 → 変わった部分だけ実際のDOMを更新
                                  ↑ これが速さの秘密
```

> リアクティビティと仮想DOMの詳しい仕組みは、第5章以降で段階的に学んでいきます。この章では「データを変えたら画面も自動で変わる」「変わった部分だけ効率よく更新される」という概要だけ掴んでおきましょう。

#### 特徴3: 柔軟性（Versatile）

Vue3 は **段階的に採用できるフレームワーク**（Progressive Framework）です。

- 既存のWebページの一部分だけに Vue3 を導入できる
- 小さなプロジェクトでは Vue3 の基本機能だけを使う
- 大規模プロジェクトでは Vue Router（ルーティング）や Pinia（状態管理）を追加する

必要に応じて機能を追加できるため、**小さく始めて大きく育てる** ことができます。

---

### Vue3 エコシステムの全体像

Vue3 は単体のライブラリだけでなく、周辺ツールと組み合わせて使います。これを **エコシステム（Ecosystem）** と呼びます。

このチュートリアルで使う主要なツールを紹介します。

```
┌─────────────────────────────────────────────────┐
│                 Vue3 エコシステム                  │
│                                                   │
│  ┌───────────┐  ┌───────────┐  ┌───────────┐    │
│  │  Vue 3    │  │Vue Router │  │  Pinia    │    │
│  │  本体     │  │ページ遷移  │  │ 状態管理   │    │
│  │(3.5.29)   │  │  (4.x)    │  │  (2.x)    │    │
│  └───────────┘  └───────────┘  └───────────┘    │
│                                                   │
│  ┌───────────┐  ┌───────────┐                    │
│  │   Vite    │  │TypeScript │                    │
│  │ビルドツール │  │ 型システム │                    │
│  │  (6.x)    │  │  (5.x)    │                    │
│  └───────────┘  └───────────┘                    │
└─────────────────────────────────────────────────┘
```

| ツール | 役割 | チュートリアルでの登場 |
|---|---|---|
| **Vue 3 本体** | UIの構築、リアクティビティ、コンポーネントシステム | 第3章〜 |
| **Vite** | 開発サーバーの起動、本番用ビルド。非常に高速 | 第2章〜 |
| **Vue Router** | SPA でのページ遷移（URL に応じた画面切り替え） | 第12章〜 |
| **Pinia** | アプリ全体の状態（データ）を一元管理する | 第13章〜 |
| **TypeScript** | JavaScript に「型」を追加して、バグを未然に防ぐ | 第2章〜 |

> 最初はこの全体像をぼんやり把握しておくだけで大丈夫です。チュートリアルを進める中で、それぞれのツールの役割を実感を持って理解できるようになります。

---

### ハンズオン

第1章はコンセプトの理解が中心ですが、従来の JavaScript と Vue3 の違いを体感するために、簡単なコード比較を見てみましょう。

#### ステップ 1: 従来の JavaScript でカウンターを作る

ボタンをクリックすると数字が増える「カウンター」を、素の JavaScript で作ります。

`counter-traditional.html`

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>カウンター（従来のJavaScript）</title>
</head>
<body>
  <h1>カウンター</h1>
  <p id="count-display">カウント: 0</p>
  <button id="increment-btn">+1</button>

  <script>
    let count = 0
    const display = document.getElementById('count-display')
    const button = document.getElementById('increment-btn')

    button.addEventListener('click', function() {
      count++
      display.textContent = 'カウント: ' + count
    })
  </script>
</body>
</html>
```

このコードでは、開発者が以下のすべてを **手動で** 行っています。

- `id` で HTML 要素を取得する（`getElementById`）
- ボタンにクリックイベントを登録する（`addEventListener`）
- カウントの値を更新する（`count++`）
- 表示テキストを手動で書き換える（`display.textContent = ...`）

特に注目したいのは、**データ（`count`）とUI（`display.textContent`）を自分で同期させている** 点です。今は1つだけなので簡単ですが、管理するデータが10個、50個と増えたらどうなるでしょうか。

#### ステップ 2: Vue3 で同じカウンターを作る場合のイメージ

同じカウンターを Vue3 で書くと、以下のようになります。これは第3章以降で実際に動かしますので、今は雰囲気だけ掴んでください。

`Counter.vue（プレビュー — 第3章以降で実際に作成します）`

```vue
<script setup lang="ts">
import { ref } from 'vue'

const count = ref(0)

const increment = (): void => {
  count.value++
}
</script>

<template>
  <h1>カウンター</h1>
  <p>カウント: {{ count }}</p>
  <button @click="increment">+1</button>
</template>
```

従来の JavaScript 版との違いに注目してください。

- **`getElementById` が不要** — テンプレート内で `{{ count }}` と書くだけで値が表示される
- **`addEventListener` が不要** — `@click="increment"` と書くだけでイベントが登録される
- **手動の表示更新が不要** — `count.value++` でデータを変えるだけで、画面が **自動的に** 更新される

これが **リアクティビティ** の力です。開発者は **「データをどう変えるか」だけに集中** できます。

#### ステップ 3: 規模が大きくなったときの違いを想像する

簡単なカウンターでは差を感じにくいかもしれません。しかし、実際のアプリケーションでは以下のような多くの要素を管理する必要があります。

- ユーザーの入力フォーム（名前、メール、パスワード…）
- サーバーから取得したデータ（商品リスト、ユーザー情報…）
- UIの状態（モーダルの開閉、タブの選択、ローディング表示…）

従来の方法では、それぞれの要素に対して「取得 → イベント登録 → 変更 → 表示反映」のコードを書く必要があります。Vue3 では、**データとUIの関係をテンプレートで宣言するだけ** で済みます。

```
【従来の JavaScript】
  データが増える → 管理コードが比例して増える → 複雑化 → バグの温床

【Vue3】
  データが増える → テンプレートで宣言を追加 → 同期は自動 → シンプルを維持
```

---

### コード全体

この章では2つのコードを比較しました。

`counter-traditional.html`

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>カウンター（従来のJavaScript）</title>
</head>
<body>
  <h1>カウンター</h1>
  <p id="count-display">カウント: 0</p>
  <button id="increment-btn">+1</button>

  <script>
    let count = 0
    const display = document.getElementById('count-display')
    const button = document.getElementById('increment-btn')

    button.addEventListener('click', function() {
      count++
      display.textContent = 'カウント: ' + count
    })
  </script>
</body>
</html>
```

`Counter.vue（プレビュー — 第3章以降で実際に動かします）`

```vue
<script setup lang="ts">
import { ref } from 'vue'

const count = ref(0)

const increment = (): void => {
  count.value++
}
</script>

<template>
  <h1>カウンター</h1>
  <p>カウント: {{ count }}</p>
  <button @click="increment">+1</button>
</template>
```

> **動作確認**: `counter-traditional.html` はブラウザで直接開いて動作確認できます。`Counter.vue` は第2章で環境構築を行った後に動かします。

**期待される表示結果:**

```
┌─────────────────────────────┐
│  カウンター                   │
│                               │
│  カウント: 0                  │
│                               │
│  [ +1 ]                       │
│                               │
│  ※ ボタンを押すと             │
│    0 → 1 → 2 → 3 ...        │
│    と数字が増えていく          │
└─────────────────────────────┘
```

---

### 解説

#### 宣言的レンダリング vs 命令的レンダリング

```javascript
// 命令的（Imperative）— 従来の JavaScript
display.textContent = 'カウント: ' + count
```

```html
<!-- 宣言的（Declarative）— Vue3 -->
<p>カウント: {{ count }}</p>
```

従来の JavaScript では「この要素のテキストを、この値に変更しろ」と **手順を1つずつ命令** します。これを **命令的レンダリング（Imperative Rendering）** と呼びます。

Vue3 では「この場所に `count` の値を表示する」と **結果を宣言** するだけです。これが **宣言的レンダリング（Declarative Rendering）** です。

宣言的レンダリングの利点は以下の通りです。

- コードが短く、読みやすい
- データと表示の対応関係が一目で分かる
- UIの更新漏れが起きにくい（フレームワークが自動で同期するため）

#### リアクティビティの概要

```typescript
const count = ref(0)  // リアクティブな値を作る
count.value++          // 値を変えるだけ → 画面が自動で更新される
```

Vue3 の `ref()` で作った値は **リアクティブ** です。この値を変更すると、テンプレート内で `{{ count }}` と書かれた箇所が **自動的に** 書き換わります。

従来の JavaScript のように「値を変更した後に、関連する全てのDOM要素を手動で更新する」必要がありません。これにより、**データの管理だけに集中できる** ようになります。

> `ref()` や `.value` の詳しい仕組みは第5章で徹底的に学びます。今は「データを変えたら画面が勝手に変わる、便利な仕組みがある」と覚えておいてください。

#### コンポーネントという考え方

Vue3 のコードが `.vue` という拡張子のファイルに書かれていることに気づいたでしょうか。このファイルを **SFC（Single File Component / シングルファイルコンポーネント）** と呼びます。

**コンポーネント（Component）** とは、UIの一部分をひとまとめにした部品のことです。レゴブロックのように、小さな部品を組み合わせてアプリ全体を作ります。

```
┌─────────────────────────────────────┐
│  アプリ全体（App.vue）                │
│  ┌───────────────────────────────┐  │
│  │  ヘッダー（Header.vue）        │  │
│  └───────────────────────────────┘  │
│  ┌──────────┐  ┌──────────────┐    │
│  │サイドバー  │  │  メイン       │    │
│  │(Sidebar   │  │(MainContent  │    │
│  │ .vue)     │  │ .vue)        │    │
│  │           │  │ ┌──────────┐ │    │
│  │           │  │ │カード     │ │    │
│  │           │  │ │(Card.vue)│ │    │
│  │           │  │ └──────────┘ │    │
│  └──────────┘  └──────────────┘    │
│  ┌───────────────────────────────┐  │
│  │  フッター（Footer.vue）        │  │
│  └───────────────────────────────┘  │
└─────────────────────────────────────┘
```

1つのコンポーネントには、HTML（構造）、CSS（見た目）、JavaScript/TypeScript（振る舞い）が **すべてまとまって** 入ります。これにより「この部品に関するコードはこのファイルにある」と明確に分かります。

> コンポーネントの詳しい使い方は第7章〜第9章で学びます。

---

### よくある間違い・FAQ

#### ❌ よくある間違い 1: 「Vue3 を学ぶ前に jQuery を習得すべき」

jQuery は優れたライブラリですが、Vue3 を学ぶための前提知識ではありません。Vue3 と jQuery は **DOM操作のアプローチが根本的に異なる** ため、jQuery の知識があるとかえって混乱する場合もあります。

HTML・CSS・JavaScript の基礎があれば、直接 Vue3 から学び始めて問題ありません。

#### ❌ よくある間違い 2: 「SPA ならすべてのWebサイトが速くなる」

SPA が常に最適とは限りません。ブログや企業のコーポレートサイトなど、**コンテンツが中心のWebサイト** では、従来のサーバーサイドレンダリングの方が適している場合があります。

SPA は **ユーザーの操作が多いアプリケーション**（管理画面、チャットツール、ダッシュボード等）に特に威力を発揮します。

#### ❌ よくある間違い 3: 「Vue・React・Angular のどれを選んでも同じ」

3つのフレームワークはそれぞれ設計思想が異なります。

| フレームワーク | 特徴 |
|---|---|
| **Vue** | 学びやすさ重視。段階的に採用可能。テンプレート構文がHTMLに近い |
| **React** | 柔軟性重視。JSX でUIを記述。巨大なエコシステム |
| **Angular** | 企業向け大規模開発重視。フルスタックフレームワーク |

どれも優れたフレームワークですが、**HTML/CSS の知識をそのまま活かしやすい** 点で、Web開発初心者には Vue3 が特におすすめです。

#### 💬 FAQ

**Q: Vue3 は仕事で使えますか？**

A: はい。Vue3 は世界中の企業で採用されています。日本でも LINE、DMM、サイバーエージェント、メルカリなど多くの企業で利用実績があります。求人数も豊富です。

**Q: Vue 2 と Vue 3 の違いは何ですか？**

A: Vue 3 は Vue 2 を完全にリニューアルしたバージョンです。パフォーマンスの大幅な向上、TypeScript のサポート強化、Composition API の導入などが主な変更点です。このチュートリアルでは Vue 3 のみを扱います。Vue 2 は 2023年末にサポートが終了しています。

**Q: TypeScript は必須ですか？**

A: Vue3 は JavaScript でも使えます。しかし、TypeScript を使うことで「型（かた）」によるエラーの早期発見、エディタの強力な補完機能、コードの可読性向上といった大きなメリットがあります。本チュートリアルでは最初から TypeScript を使う方針です。TypeScript の知識は、チュートリアルの中で必要な分だけ説明します。

---

### 練習問題

学んだ内容を定着させるための練習問題です。

#### 練習 1: SPA と MPA の違いを説明する

**課題:**

友人に「SPA って何？」と聞かれたとします。以下の3つの観点で、MPA（従来のWebサイト）との違いを **自分の言葉で** 説明してみてください。

1. ページ遷移の仕組みの違い
2. ユーザー体験の違い
3. データ取得方法の違い

**ヒント:**

この章で見た「ブラウザとサーバーの通信の図」を思い出してください。

<details>
<summary>解答例を見る</summary>

**解答例:**

1. **ページ遷移の仕組み**: MPA はリンクをクリックするたびにサーバーから新しいHTMLページをダウンロードします。SPA は最初に1つのHTMLだけをダウンロードし、その後は JavaScript が画面の中身を書き換えます。

2. **ユーザー体験**: MPA ではページが一瞬白くなる再読み込みが発生します。SPA では画面がスムーズに切り替わり、デスクトップアプリのような操作感が得られます。

3. **データ取得**: MPA は遷移のたびにHTML全体を取得します。SPA は必要なデータ（JSON）だけをサーバーから取得し、画面の更新に必要な部分だけを書き換えます。

</details>

#### 練習 2: 命令的 vs 宣言的の違いを見分ける

**課題:**

以下の2つのコードを見て、それぞれ「命令的」「宣言的」のどちらか答えてください。また、なぜそう判断したか理由も書いてください。

**コードA:**

```javascript
const element = document.querySelector('.message')
element.style.color = 'red'
element.textContent = 'エラーが発生しました'
```

**コードB:**

```html
<p :class="{ error: hasError }" >{{ errorMessage }}</p>
```

**ヒント:**

「手順を1つずつ指示しているか」「結果だけを宣言しているか」で見分けます。

<details>
<summary>解答例を見る</summary>

**解答例:**

- **コードA: 命令的** — `querySelector` で要素を取得し、`style.color` を変更し、`textContent` を書き換えるという **手順を1つずつ命令** しています。

- **コードB: 宣言的** — 「`hasError` が true なら `error` クラスを付ける」「`errorMessage` の値を表示する」という **結果を宣言** しているだけです。どうやってDOMを書き換えるかは Vue3 が自動で処理します。

</details>

#### 練習 3: Vue3 エコシステムの役割を整理する

**課題:**

以下の表の空欄を埋めてください。

| ツール | 役割 |
|---|---|
| Vue 3 本体 | ？ |
| Vite | ？ |
| Vue Router | ？ |
| Pinia | ？ |
| TypeScript | ？ |

**ヒント:**

この章の「Vue3 エコシステムの全体像」セクションを振り返ってみましょう。

<details>
<summary>解答例を見る</summary>

| ツール | 役割 |
|---|---|
| Vue 3 本体 | UIの構築、リアクティビティ（データとUIの自動同期）、コンポーネントシステム |
| Vite | 開発サーバーの起動と本番用ビルド。高速なビルドツール |
| Vue Router | SPA でのページ遷移を管理する。URLに応じた画面切り替え |
| Pinia | アプリ全体の状態（データ）を一箇所で管理する |
| TypeScript | JavaScript に型を追加し、バグの早期発見とコードの可読性向上を実現する |

**解説:**

チュートリアルが進むにつれて、これらのツールを1つずつ実際に使っていきます。第2章で Vite と TypeScript、第12章で Vue Router、第13章で Pinia を導入します。

</details>

---

### まとめ

この章では以下の内容を学びました。

| 学んだこと | ポイント |
|---|---|
| SPA（Single Page Application） | 1つのHTMLページでJavaScriptが画面を動的に書き換える方式。スムーズな操作感が特徴 |
| 宣言的レンダリング | Vue3 は「何を表示するか」を宣言するだけ。DOM操作はフレームワークが自動処理 |
| Vue3 エコシステム | Vue本体 + Vite + Vue Router + Pinia + TypeScript の組み合わせで開発する |

**キーワード**: `SPA`, `宣言的レンダリング`, `リアクティビティ`, `コンポーネント`, `エコシステム`

---

### 次の章へ

次の第2章では、いよいよ実際に手を動かします。Node.js のインストールから始めて、`create-vue` で Vue3 + TypeScript のプロジェクトを作成し、開発サーバーを起動して「Hello, Vue3!」をブラウザに表示させましょう。
